"use strict";(globalThis.webpackChunkmydocs=globalThis.webpackChunkmydocs||[]).push([[3131],{6433:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Data-model/value-objects","title":"Value Objects","description":"Purpose","source":"@site/docs/Data-model/value-objects.md","sourceDirName":"Data-model","slug":"/Data-model/value-objects","permalink":"/brs-rmm-ai-documentation/docs/Data-model/value-objects","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Data-model/value-objects.md","tags":[{"inline":true,"label":"value-objects","permalink":"/brs-rmm-ai-documentation/docs/tags/value-objects"},{"inline":true,"label":"immutable-data","permalink":"/brs-rmm-ai-documentation/docs/tags/immutable-data"},{"inline":true,"label":"domain-primitives","permalink":"/brs-rmm-ai-documentation/docs/tags/domain-primitives"},{"inline":true,"label":"validation","permalink":"/brs-rmm-ai-documentation/docs/tags/validation"},{"inline":true,"label":"type-safety","permalink":"/brs-rmm-ai-documentation/docs/tags/type-safety"}],"version":"current","lastUpdatedBy":"Hair","lastUpdatedAt":1761835238000,"frontMatter":{"status":"draft","lastReviewed":"2025-10-08T00:00:00.000Z","owner":"members-module-team","category":"data-model","tags":["value-objects","immutable-data","domain-primitives","validation","type-safety"]},"sidebar":"dataModelSidebar","previous":{"title":"Domain and Data Shapes","permalink":"/brs-rmm-ai-documentation/docs/Data-model/domain-and-data-shapes"}}');var t=a(4848),s=a(8453);const l={status:"draft",lastReviewed:new Date("2025-10-08T00:00:00.000Z"),owner:"members-module-team",category:"data-model",tags:["value-objects","immutable-data","domain-primitives","validation","type-safety"]},r="Value Objects",o={},d=[{value:"Purpose",id:"purpose",level:2},{value:"When You Need This",id:"when-you-need-this",level:2},{value:"Context / Diagram",id:"context--diagram",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Flow / Sequence",id:"flow--sequence",level:2},{value:"Rules &amp; Constraints",id:"rules--constraints",level:2},{value:"Minimal Example",id:"minimal-example",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"value-objects",children:"Value Objects"})}),"\n",(0,t.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,t.jsx)(n.p,{children:"Define the immutable, minimal, intention-revealing wrappers around normalized API data that underpin reliable business logic and testability."}),"\n",(0,t.jsx)(n.h2,{id:"when-you-need-this",children:"When You Need This"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Extracting logic from raw arrays"}),"\n",(0,t.jsx)(n.li,{children:"Ensuring invariants (e.g., email normalized, status enum valid)"}),"\n",(0,t.jsx)(n.li,{children:"Designing return types for repository or handler methods"}),"\n",(0,t.jsx)(n.li,{children:"Preparing data for caching and later hydration"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"context--diagram",children:"Context / Diagram"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"API Payload \u2192 Normalization \u2192 Value Object (Immutable) \u2192 View Model / Handler Result\n"})}),"\n",(0,t.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Immutability: Once constructed, internal state never changes"}),"\n",(0,t.jsx)(n.li,{children:"Invariant Enforcement: Construction time validation of required domain rules"}),"\n",(0,t.jsxs)(n.li,{children:["Semantic API: Clear method names (e.g., ",(0,t.jsx)(n.code,{children:"isActive()"}),", ",(0,t.jsx)(n.code,{children:"displayName()"}),") hide data shape details"]}),"\n",(0,t.jsxs)(n.li,{children:["Hydration Variants: ",(0,t.jsx)(n.code,{children:"fromApiResponse()"})," vs ",(0,t.jsx)(n.code,{children:"fromCache()"})," static constructors"]}),"\n",(0,t.jsxs)(n.li,{children:["Conversion: ",(0,t.jsx)(n.code,{children:"toArray()"})," or dedicated DTO for outbound serialization"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"flow--sequence",children:"Flow / Sequence"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Raw array arrives from repository HTTP call or cache"}),"\n",(0,t.jsx)(n.li,{children:"Selected static constructor validates presence + value domain (enums / formats)"}),"\n",(0,t.jsx)(n.li,{children:"Internal properties set privately; derivatives (e.g., combined full name) computed lazily or at build time"}),"\n",(0,t.jsx)(n.li,{children:"Consumers invoke intention methods; they never mutate state"}),"\n",(0,t.jsx)(n.li,{children:"Object can be serialized through dedicated conversion method"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"rules--constraints",children:"Rules & Constraints"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Constructors MUST be private or protected; use static factories"}),"\n",(0,t.jsx)(n.li,{children:"Static constructors MUST throw domain-specific exceptions for invalid payloads"}),"\n",(0,t.jsx)(n.li,{children:"Public getters SHOULD avoid returning raw arrays; prefer scalars or nested VO"}),"\n",(0,t.jsx)(n.li,{children:"Avoid exposing internal formatting logic (centralize within VO)"}),"\n",(0,t.jsx)(n.li,{children:"No setter methods or public mutable properties allowed"}),"\n",(0,t.jsxs)(n.li,{children:["VO names MUST end with ",(0,t.jsx)(n.code,{children:"VO"})," or ",(0,t.jsx)(n.code,{children:"Value"})," for discoverability"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"minimal-example",children:"Minimal Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"final class BookingSlotVO {\n    private function __construct(\n        private string $slotId,\n        private \\DateTimeImmutable $start,\n        private int $availableSpots\n    ) {}\n    public static function fromApiResponse(array $p): self {\n        foreach(['id','start_time','available'] as $f) if(!isset($p[$f])) throw new InvalidSlotPayload($f);\n        return new self(\n            (string)$p['id'],\n            new \\DateTimeImmutable($p['start_time']),\n            (int)$p['available']\n        );\n    }\n    public function isAvailable(): bool { return $this->availableSpots > 0; }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Treating Value Objects as data bags without behavior"}),"\n",(0,t.jsx)(n.li,{children:"Bypassing validation by introducing public constructors"}),"\n",(0,t.jsx)(n.li,{children:"Accumulating unrelated fields creating large, unstable classes"}),"\n",(0,t.jsx)(n.li,{children:"Using arrays for nested sub-entities instead of dedicated VO structs"}),"\n",(0,t.jsx)(n.li,{children:"Forgetting alternate constructor for cache hydration"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../data-model/domain-and-data-shapes.md",children:"Domain and Data Shapes"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../patterns/commands-and-handlers.md",children:"Commands & Handlers"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../patterns/repository-and-caching-strategy.md",children:"Repository & Caching Strategy"})}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>r});var i=a(6540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);