"use strict";(globalThis.webpackChunkmydocs=globalThis.webpackChunkmydocs||[]).push([[8507],{8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var s=i(6540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},9671:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Foundations/security-overview","title":"Security Overview","description":"Purpose","source":"@site/docs/Foundations/security-overview.md","sourceDirName":"Foundations","slug":"/Foundations/security-overview","permalink":"/brs-rmm-ai-documentation/docs/Foundations/security-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Foundations/security-overview.md","tags":[{"inline":true,"label":"security","permalink":"/brs-rmm-ai-documentation/docs/tags/security"},{"inline":true,"label":"authentication","permalink":"/brs-rmm-ai-documentation/docs/tags/authentication"},{"inline":true,"label":"authorization","permalink":"/brs-rmm-ai-documentation/docs/tags/authorization"},{"inline":true,"label":"csrf","permalink":"/brs-rmm-ai-documentation/docs/tags/csrf"},{"inline":true,"label":"data-protection","permalink":"/brs-rmm-ai-documentation/docs/tags/data-protection"}],"version":"current","lastUpdatedBy":"Hair","lastUpdatedAt":1761836475000,"frontMatter":{"status":"draft","lastReviewed":"2025-10-08T00:00:00.000Z","owner":"members-module-team","category":"foundations","tags":["security","authentication","authorization","csrf","data-protection"]},"sidebar":"foundationsSidebar","previous":{"title":"Request Lifecycle","permalink":"/brs-rmm-ai-documentation/docs/Foundations/request-lifecycle"},"next":{"title":"System Architecture","permalink":"/brs-rmm-ai-documentation/docs/Foundations/system-architecture"}}');var t=i(4848),r=i(8453);const a={status:"draft",lastReviewed:new Date("2025-10-08T00:00:00.000Z"),owner:"members-module-team",category:"foundations",tags:["security","authentication","authorization","csrf","data-protection"]},o="Security Overview",l={},c=[{value:"Purpose",id:"purpose",level:2},{value:"When You Need This",id:"when-you-need-this",level:2},{value:"Context / Diagram",id:"context--diagram",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Flow / Sequence",id:"flow--sequence",level:2},{value:"Rules &amp; Constraints",id:"rules--constraints",level:2},{value:"Minimal Example",id:"minimal-example",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"security-overview",children:"Security Overview"})}),"\n",(0,t.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,t.jsx)(n.p,{children:"Summarize mechanisms protecting club-scoped data, session integrity, and safe external API interaction while minimizing attack surface."}),"\n",(0,t.jsx)(n.h2,{id:"when-you-need-this",children:"When You Need This"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Auditing access control decisions"}),"\n",(0,t.jsx)(n.li,{children:"Adding new endpoints requiring authentication"}),"\n",(0,t.jsx)(n.li,{children:"Reviewing event or caching implications on data exposure"}),"\n",(0,t.jsx)(n.li,{children:"Investigating suspected data leakage"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"context--diagram",children:"Context / Diagram"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Client \u2192 Session (Auth) \u2192 Controller \u2192 Command \u2192 Handler \u2192 Repository \u2192 BRS API\n            \u2191 Session Store (Redis)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Session-Based Auth: Server-managed session associates user + club context"}),"\n",(0,t.jsx)(n.li,{children:"Club Isolation: Mandatory inclusion of clubId across repository boundaries"}),"\n",(0,t.jsx)(n.li,{children:"Least Exposure: Only required fields passed to frontend payloads"}),"\n",(0,t.jsx)(n.li,{children:"Input Validation: Early rejection of malformed identifiers and formats"}),"\n",(0,t.jsx)(n.li,{children:"Secure Caching: Redis keys segregated by club to prevent accidental overlap"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"flow--sequence",children:"Flow / Sequence"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Authentication populates session with user + club identifiers"}),"\n",(0,t.jsx)(n.li,{children:"Controller extracts club context; rejects if absent or mismatched"}),"\n",(0,t.jsx)(n.li,{children:"Command dispatched; Handler validates authorization (if contextual rules required)"}),"\n",(0,t.jsx)(n.li,{children:"Repository call includes explicit clubId in path and cache key"}),"\n",(0,t.jsx)(n.li,{children:"Response sanitized (remove internal-only fields) before serialization"}),"\n",(0,t.jsx)(n.li,{children:"Frontend receives minimal dataset; additional data fetched on demand"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"rules--constraints",children:"Rules & Constraints"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All externally supplied identifiers MUST be validated (length, charset)"}),"\n",(0,t.jsx)(n.li,{children:"Sensitive fields (emails, member IDs) MUST NOT appear in logs without masking"}),"\n",(0,t.jsx)(n.li,{children:"Session fixation mitigation MUST regenerate session ID on privilege changes"}),"\n",(0,t.jsx)(n.li,{children:"Cache keys MUST NOT include raw PII beyond necessary identifiers (avoid names)"}),"\n",(0,t.jsx)(n.li,{children:"Error messages SHOULD avoid enumerating existence of resources (generic phrasing)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"minimal-example",children:"Minimal Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"if (!$session->has('club_id')) { throw new AccessDenied('Club context missing'); }\n$clubId = $session->get('club_id');\n$cmd = new GetMemberProfileCommand($clubId, $memberId);\n$vo = $commandBus->handle($cmd);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Trusting client-provided club identifiers without session cross-check"}),"\n",(0,t.jsx)(n.li,{children:"Over-exposing full member profile when only summary needed"}),"\n",(0,t.jsx)(n.li,{children:"Logging entire request payloads (increasing leak risk)"}),"\n",(0,t.jsx)(n.li,{children:"Reusing cache keys across clubs leading to data bleed"}),"\n",(0,t.jsx)(n.li,{children:"Accumulating ad-hoc authorization checks in controllers instead of handlers"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/brs-rmm-ai-documentation/docs/Foundations/multi-tenancy",children:"Multi-Tenancy"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/brs-rmm-ai-documentation/docs/Foundations/request-lifecycle",children:"Request Lifecycle"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/brs-rmm-ai-documentation/docs/Quality/error-and-resilience",children:"Error and Resilience"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);